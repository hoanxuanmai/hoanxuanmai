- [**ğŸ”¥ BÃ i phá»ng váº¥n chuyÃªn sÃ¢u vá» PHP**](#-bÃ i-phá»ng-váº¥n-chuyÃªn-sÃ¢u-vá»-php)
  - [**I. Kiáº¿n thá»©c cÆ¡ báº£n vá» PHP**](#i-kiáº¿n-thá»©c-cÆ¡-báº£n-vá»-php)
    - [**1ï¸âƒ£ PHP lÃ  gÃ¬? PHP hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?**](#1ï¸âƒ£-php-lÃ -gÃ¬-php-hoáº¡t-Ä‘á»™ng-nhÆ°-tháº¿-nÃ o)
    - [**2ï¸âƒ£ Sá»± khÃ¡c nhau giá»¯a `==` vÃ  `===` trong PHP lÃ  gÃ¬?**](#2ï¸âƒ£-sá»±-khÃ¡c-nhau-giá»¯a--vÃ --trong-php-lÃ -gÃ¬)
    - [**3ï¸âƒ£ PHP lÃ  ngÃ´n ngá»¯ thÃ´ng dá»‹ch hay biÃªn dá»‹ch?**](#3ï¸âƒ£-php-lÃ -ngÃ´n-ngá»¯-thÃ´ng-dá»‹ch-hay-biÃªn-dá»‹ch)
  - [**II. OOP trong PHP**](#ii-oop-trong-php)
    - [**4ï¸âƒ£ PHP há»— trá»£ nhá»¯ng tÃ­nh nÄƒng láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng (OOP) nÃ o?**](#4ï¸âƒ£-php-há»—-trá»£-nhá»¯ng-tÃ­nh-nÄƒng-láº­p-trÃ¬nh-hÆ°á»›ng-Ä‘á»‘i-tÆ°á»£ng-oop-nÃ o)
    - [**5ï¸âƒ£ Abstract Class vÃ  Interface khÃ¡c nhau tháº¿ nÃ o?**](#5ï¸âƒ£-abstract-class-vÃ -interface-khÃ¡c-nhau-tháº¿-nÃ o)
  - [**III. PHP vÃ  Database**](#iii-php-vÃ -database)
    - [**6ï¸âƒ£ Sá»± khÃ¡c nhau giá»¯a `PDO` vÃ  `MySQLi`?**](#6ï¸âƒ£-sá»±-khÃ¡c-nhau-giá»¯a-pdo-vÃ -mysqli)
  - [**IV. PHP Performance \& Security**](#iv-php-performance--security)
    - [**7ï¸âƒ£ LÃ m tháº¿ nÃ o Ä‘á»ƒ tá»‘i Æ°u hiá»‡u suáº¥t PHP?**](#7ï¸âƒ£-lÃ m-tháº¿-nÃ o-Ä‘á»ƒ-tá»‘i-Æ°u-hiá»‡u-suáº¥t-php)
    - [**8ï¸âƒ£ LÃ m tháº¿ nÃ o Ä‘á»ƒ báº£o máº­t á»©ng dá»¥ng PHP?**](#8ï¸âƒ£-lÃ m-tháº¿-nÃ o-Ä‘á»ƒ-báº£o-máº­t-á»©ng-dá»¥ng-php)
  - [**V. PHP Advanced**](#v-php-advanced)
    - [**9ï¸âƒ£ Singleton Pattern lÃ  gÃ¬? Khi nÃ o nÃªn dÃ¹ng?**](#9ï¸âƒ£-singleton-pattern-lÃ -gÃ¬-khi-nÃ o-nÃªn-dÃ¹ng)
    - [**ğŸ”Ÿ PHP há»— trá»£ nhá»¯ng kiá»ƒu dá»¯ liá»‡u nÃ o?**](#-php-há»—-trá»£-nhá»¯ng-kiá»ƒu-dá»¯-liá»‡u-nÃ o)
  - [**ğŸ¯ Káº¿t luáº­n**](#-káº¿t-luáº­n)
- [**ğŸ”¥ OOP Trong PHP â€“ Tá»« CÆ¡ Báº£n Äáº¿n NÃ¢ng Cao**](#-oop-trong-php--tá»«-cÆ¡-báº£n-Ä‘áº¿n-nÃ¢ng-cao)
  - [**1ï¸âƒ£ OOP lÃ  gÃ¬?**](#1ï¸âƒ£-oop-lÃ -gÃ¬)
  - [**2ï¸âƒ£ Class vÃ  Object trong PHP**](#2ï¸âƒ£-class-vÃ -object-trong-php)
  - [**3ï¸âƒ£ TÃ­nh ÄÃ³ng GÃ³i (Encapsulation)**](#3ï¸âƒ£-tÃ­nh-Ä‘Ã³ng-gÃ³i-encapsulation)
  - [**4ï¸âƒ£ TÃ­nh Káº¿ Thá»«a (Inheritance)**](#4ï¸âƒ£-tÃ­nh-káº¿-thá»«a-inheritance)
  - [**5ï¸âƒ£ TÃ­nh Äa HÃ¬nh (Polymorphism)**](#5ï¸âƒ£-tÃ­nh-Ä‘a-hÃ¬nh-polymorphism)
  - [**6ï¸âƒ£ TÃ­nh Trá»«u TÆ°á»£ng (Abstraction)**](#6ï¸âƒ£-tÃ­nh-trá»«u-tÆ°á»£ng-abstraction)
  - [**7ï¸âƒ£ Traits trong PHP**](#7ï¸âƒ£-traits-trong-php)
  - [**8ï¸âƒ£ Static Methods vÃ  Constants trong PHP**](#8ï¸âƒ£-static-methods-vÃ -constants-trong-php)
  - [**ğŸ¯ Káº¿t Luáº­n**](#-káº¿t-luáº­n-1)
- [ğŸ”’ **Báº£o máº­t á»©ng dá»¥ng PHP â€“ Tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao**](#-báº£o-máº­t-á»©ng-dá»¥ng-php--tá»«-cÆ¡-báº£n-Ä‘áº¿n-nÃ¢ng-cao)
  - [**1ï¸âƒ£ SQL Injection â€“ Nguy hiá»ƒm vÃ  cÃ¡ch phÃ²ng chá»‘ng**](#1ï¸âƒ£-sql-injection--nguy-hiá»ƒm-vÃ -cÃ¡ch-phÃ²ng-chá»‘ng)
    - [ğŸ›‘ **SQL Injection lÃ  gÃ¬?**](#-sql-injection-lÃ -gÃ¬)
    - [âœ… **CÃ¡ch phÃ²ng chá»‘ng SQL Injection**](#-cÃ¡ch-phÃ²ng-chá»‘ng-sql-injection)
  - [**2ï¸âƒ£ XSS (Cross-Site Scripting) â€“ CÃ¡ch khai thÃ¡c vÃ  báº£o vá»‡**](#2ï¸âƒ£-xss-cross-site-scripting--cÃ¡ch-khai-thÃ¡c-vÃ -báº£o-vá»‡)
    - [ğŸ›‘ **XSS lÃ  gÃ¬?**](#-xss-lÃ -gÃ¬)
    - [âœ… **CÃ¡ch phÃ²ng chá»‘ng XSS**](#-cÃ¡ch-phÃ²ng-chá»‘ng-xss)
  - [**3ï¸âƒ£ CSRF (Cross-Site Request Forgery) â€“ CÃ¡ch khai thÃ¡c vÃ  báº£o vá»‡**](#3ï¸âƒ£-csrf-cross-site-request-forgery--cÃ¡ch-khai-thÃ¡c-vÃ -báº£o-vá»‡)
    - [ğŸ›‘ **CSRF lÃ  gÃ¬?**](#-csrf-lÃ -gÃ¬)
    - [âœ… **CÃ¡ch phÃ²ng chá»‘ng CSRF**](#-cÃ¡ch-phÃ²ng-chá»‘ng-csrf)
  - [**4ï¸âƒ£ Báº£o máº­t máº­t kháº©u trong PHP**](#4ï¸âƒ£-báº£o-máº­t-máº­t-kháº©u-trong-php)
    - [ğŸ›‘ **Sai láº§m phá»• biáº¿n**](#-sai-láº§m-phá»•-biáº¿n)
    - [âœ… **CÃ¡ch báº£o máº­t máº­t kháº©u Ä‘Ãºng chuáº©n**](#-cÃ¡ch-báº£o-máº­t-máº­t-kháº©u-Ä‘Ãºng-chuáº©n)
  - [**5ï¸âƒ£ Chá»‘ng Brute Force Attack báº±ng Rate Limiting**](#5ï¸âƒ£-chá»‘ng-brute-force-attack-báº±ng-rate-limiting)
    - [âœ… **CÃ¡ch ngÄƒn cháº·n**](#-cÃ¡ch-ngÄƒn-cháº·n)
  - [**6ï¸âƒ£ Báº£o máº­t Header HTTP báº±ng `header()`**](#6ï¸âƒ£-báº£o-máº­t-header-http-báº±ng-header)
  - [**ğŸ¯ Káº¿t luáº­n**](#-káº¿t-luáº­n-2)
- [**1. PHP 5.6 â†’ PHP 7.x**](#1-php-56--php-7x)
  - [**ğŸ”¹ Cáº£i tiáº¿n chÃ­nh trong PHP 7**](#-cáº£i-tiáº¿n-chÃ­nh-trong-php-7)
    - [**1.1. TÄƒng hiá»‡u suáº¥t (Hiá»‡u nÄƒng gáº¥p 2)**](#11-tÄƒng-hiá»‡u-suáº¥t-hiá»‡u-nÄƒng-gáº¥p-2)
    - [**1.2. Kiá»ƒu dá»¯ liá»‡u máº¡nh hÆ¡n (Scalar Type Hints)**](#12-kiá»ƒu-dá»¯-liá»‡u-máº¡nh-hÆ¡n-scalar-type-hints)
    - [**1.3. ToÃ¡n tá»­ Null Coalescing (`??`)**](#13-toÃ¡n-tá»­-null-coalescing-)
    - [**1.4. ToÃ¡n tá»­ Spaceship (`<=>`)**](#14-toÃ¡n-tá»­-spaceship-)
    - [**1.5. Anonymous Class (Lá»›p áº¨n Danh)**](#15-anonymous-class-lá»›p-áº©n-danh)
    - [**1.6. Há»— trá»£ Exception tá»‘t hÆ¡n**](#16-há»—-trá»£-exception-tá»‘t-hÆ¡n)
    - [**1.7. Há»§y bá» (Deprecated)**](#17-há»§y-bá»-deprecated)
- [**2. PHP 7.x â†’ PHP 8.x**](#2-php-7x--php-8x)
  - [**ğŸ”¹ Cáº£i tiáº¿n chÃ­nh trong PHP 8**](#-cáº£i-tiáº¿n-chÃ­nh-trong-php-8)
    - [**2.1. Just-In-Time Compilation (JIT)**](#21-just-in-time-compilation-jit)
    - [**2.2. Union Types**](#22-union-types)
    - [**2.3. Named Arguments**](#23-named-arguments)
    - [**2.4. Constructor Property Promotion**](#24-constructor-property-promotion)
    - [**2.5. Match Expression (Thay tháº¿ `switch`)**](#25-match-expression-thay-tháº¿-switch)
    - [**2.6. Nullsafe Operator (`?->`)**](#26-nullsafe-operator--)
    - [**2.7. Attributes (Annotations)**](#27-attributes-annotations)
    - [**2.8. Fibers (PHP 8.1)**](#28-fibers-php-81)
    - [**2.9. Deprecation \& Thay Ä‘á»•i**](#29-deprecation--thay-Ä‘á»•i)
- [**3. NÃªn nÃ¢ng cáº¥p nhÆ° tháº¿ nÃ o?**](#3-nÃªn-nÃ¢ng-cáº¥p-nhÆ°-tháº¿-nÃ o)
    - [**ğŸ¯ CÃ¡c bÆ°á»›c nÃ¢ng cáº¥p an toÃ n**](#-cÃ¡c-bÆ°á»›c-nÃ¢ng-cáº¥p-an-toÃ n)
- [**ğŸ¯ Káº¿t luáº­n**](#-káº¿t-luáº­n-3)
  - [**ğŸ¯ Lá»£i Ã­ch thá»±c táº¿ cá»§a PHP 8 Attributes**](#-lá»£i-Ã­ch-thá»±c-táº¿-cá»§a-php-8-attributes)
  - [**1. á»¨ng dá»¥ng trong Routing (XÃ¢y dá»±ng Router giá»‘ng Laravel)**](#1-á»©ng-dá»¥ng-trong-routing-xÃ¢y-dá»±ng-router-giá»‘ng-laravel)
    - [**ğŸš€ TrÆ°á»›c Ä‘Ã¢y (PHP 7 - Annotation)**](#-trÆ°á»›c-Ä‘Ã¢y-php-7---annotation)
    - [**ğŸš€ PHP 8 - DÃ¹ng Attributes**](#-php-8---dÃ¹ng-attributes)
  - [**2. á»¨ng dá»¥ng trong Middleware (Giá»‘ng Laravel)**](#2-á»©ng-dá»¥ng-trong-middleware-giá»‘ng-laravel)
    - [**ğŸš€ DÃ¹ng Attributes Ä‘á»ƒ gÃ¡n Middleware**](#-dÃ¹ng-attributes-Ä‘á»ƒ-gÃ¡n-middleware)
    - [**ğŸš€ Láº¥y Middleware báº±ng Reflection**](#-láº¥y-middleware-báº±ng-reflection)
  - [**3. á»¨ng dá»¥ng trong Validation Form**](#3-á»©ng-dá»¥ng-trong-validation-form)
    - [**ğŸš€ DÃ¹ng Attributes Ä‘á»ƒ Ä‘á»‹nh nghÄ©a Validation**](#-dÃ¹ng-attributes-Ä‘á»ƒ-Ä‘á»‹nh-nghÄ©a-validation)
    - [**ğŸš€ DÃ¹ng Reflection Ä‘á»ƒ láº¥y Validation Rule**](#-dÃ¹ng-reflection-Ä‘á»ƒ-láº¥y-validation-rule)
  - [**4. á»¨ng dá»¥ng trong Dependency Injection (Giá»‘ng Symfony)**](#4-á»©ng-dá»¥ng-trong-dependency-injection-giá»‘ng-symfony)
    - [**ğŸš€ DÃ¹ng Attributes Ä‘á»ƒ Inject Service**](#-dÃ¹ng-attributes-Ä‘á»ƒ-inject-service)
    - [**ğŸš€ DÃ¹ng Reflection Ä‘á»ƒ Inject Service**](#-dÃ¹ng-reflection-Ä‘á»ƒ-inject-service)
  - [**ğŸ¯ Tá»•ng Káº¿t â€“ Táº¡i sao nÃªn dÃ¹ng Attributes?**](#-tá»•ng-káº¿t--táº¡i-sao-nÃªn-dÃ¹ng-attributes)
  - [**ğŸ¯ Khi nÃ o nÃªn dÃ¹ng Attributes?**](#-khi-nÃ o-nÃªn-dÃ¹ng-attributes)
 

---

# **ğŸ”¥ BÃ i phá»ng váº¥n chuyÃªn sÃ¢u vá» PHP**  

## **I. Kiáº¿n thá»©c cÆ¡ báº£n vá» PHP**  

### **1ï¸âƒ£ PHP lÃ  gÃ¬? PHP hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?**  
âœ… **Tráº£ lá»i:**  
PHP (**Hypertext Preprocessor**) lÃ  má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh ká»‹ch báº£n phÃ­a server dÃ¹ng Ä‘á»ƒ phÃ¡t triá»ƒn web.  
- PHP cháº¡y trÃªn server, xá»­ lÃ½ yÃªu cáº§u tá»« trÃ¬nh duyá»‡t, vÃ  tráº£ vá» káº¿t quáº£ (HTML, JSON, XML,...).  
- NÃ³ cÃ³ thá»ƒ nhÃºng vÃ o HTML, káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u, xá»­ lÃ½ form, quáº£n lÃ½ session,...  

ğŸ“Œ **VÃ­ dá»¥ Ä‘Æ¡n giáº£n:**  
```php
<?php
echo "Hello, PHP!";
?>
```

---

### **2ï¸âƒ£ Sá»± khÃ¡c nhau giá»¯a `==` vÃ  `===` trong PHP lÃ  gÃ¬?**  
âœ… **Tráº£ lá»i:**  
- `==` (equal) **so sÃ¡nh giÃ¡ trá»‹** nhÆ°ng **khÃ´ng xÃ©t kiá»ƒu dá»¯ liá»‡u**.  
- `===` (identical) **so sÃ¡nh cáº£ giÃ¡ trá»‹ vÃ  kiá»ƒu dá»¯ liá»‡u**.  

ğŸ“Œ **VÃ­ dá»¥:**  
```php
var_dump(5 == "5");   // true  (chá»‰ so sÃ¡nh giÃ¡ trá»‹)
var_dump(5 === "5");  // false (so sÃ¡nh cáº£ kiá»ƒu dá»¯ liá»‡u)
```

---

### **3ï¸âƒ£ PHP lÃ  ngÃ´n ngá»¯ thÃ´ng dá»‹ch hay biÃªn dá»‹ch?**  
âœ… **Tráº£ lá»i:**  
PHP lÃ  **ngÃ´n ngá»¯ thÃ´ng dá»‹ch**.  
- MÃ£ PHP Ä‘Æ°á»£c thÃ´ng dá»‹ch tá»«ng dÃ²ng bá»Ÿi PHP Engine khi thá»±c thi.  
- Tuy nhiÃªn, PHP cÃ³ thá»ƒ Ä‘Æ°á»£c **biÃªn dá»‹ch thÃ nh mÃ£ opcode** (báº±ng OPCache) Ä‘á»ƒ tÄƒng hiá»‡u suáº¥t.  

---

## **II. OOP trong PHP**  

### **4ï¸âƒ£ PHP há»— trá»£ nhá»¯ng tÃ­nh nÄƒng láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng (OOP) nÃ o?**  
âœ… **Tráº£ lá»i:** PHP há»— trá»£ Ä‘áº§y Ä‘á»§ cÃ¡c tÃ­nh nÄƒng OOP:  
âœ” **Class & Object**  
âœ” **Inheritance (Káº¿ thá»«a)**  
âœ” **Encapsulation (ÄÃ³ng gÃ³i)**  
âœ” **Polymorphism (Äa hÃ¬nh)**  
âœ” **Abstract Class & Interface**  
âœ” **Trait**  

ğŸ“Œ **VÃ­ dá»¥: Class & Object trong PHP**  
```php
class Animal {
    public $name;
    
    public function __construct($name) {
        $this->name = $name;
    }

    public function speak() {
        return "I am an animal";
    }
}

$dog = new Animal("Dog");
echo $dog->speak(); // "I am an animal"
```

---

### **5ï¸âƒ£ Abstract Class vÃ  Interface khÃ¡c nhau tháº¿ nÃ o?**  
âœ… **Tráº£ lá»i:**  
| **TiÃªu chÃ­**  | **Abstract Class** | **Interface** |
|--------------|-----------------|----------------|
| Chá»©a method cÃ³ body | âœ… CÃ³ | âŒ KhÃ´ng |
| Chá»©a thuá»™c tÃ­nh | âœ… CÃ³ | âŒ KhÃ´ng |
| ÄÆ°á»£c implement báº±ng | `extends` | `implements` |
| Má»™t class cÃ³ thá»ƒ dÃ¹ng nhiá»u cÃ¡i khÃ´ng? | âŒ KhÃ´ng | âœ… CÃ³ |

ğŸ“Œ **VÃ­ dá»¥ vá» Abstract Class**  
```php
abstract class Animal {
    abstract public function makeSound();
}

class Dog extends Animal {
    public function makeSound() {
        return "Bark!";
    }
}
```

ğŸ“Œ **VÃ­ dá»¥ vá» Interface**  
```php
interface Speakable {
    public function speak();
}

class Human implements Speakable {
    public function speak() {
        return "Hello!";
    }
}
```

---

## **III. PHP vÃ  Database**  

### **6ï¸âƒ£ Sá»± khÃ¡c nhau giá»¯a `PDO` vÃ  `MySQLi`?**  
âœ… **Tráº£ lá»i:**  
| **TiÃªu chÃ­** | **PDO** | **MySQLi** |
|-------------|--------|---------|
| Há»— trá»£ nhiá»u DB | âœ… CÃ³ (MySQL, PostgreSQL, SQLite,...) | âŒ Chá»‰ MySQL |
| Prepared Statements | âœ… CÃ³ | âœ… CÃ³ |
| Káº¿t ná»‘i Object-Oriented | âœ… CÃ³ | âœ… CÃ³ |
| Káº¿t ná»‘i Procedural | âŒ KhÃ´ng | âœ… CÃ³ |

ğŸ“Œ **VÃ­ dá»¥ káº¿t ná»‘i MySQL vá»›i PDO**  
```php
$pdo = new PDO("mysql:host=localhost;dbname=testdb", "root", "");
```

---

## **IV. PHP Performance & Security**  

### **7ï¸âƒ£ LÃ m tháº¿ nÃ o Ä‘á»ƒ tá»‘i Æ°u hiá»‡u suáº¥t PHP?**  
âœ… **Tráº£ lá»i:**  
1ï¸âƒ£ **Báº­t OPCache** Ä‘á»ƒ lÆ°u mÃ£ opcode biÃªn dá»‹ch.  
2ï¸âƒ£ **Sá»­ dá»¥ng Composer Autoloading**.  
3ï¸âƒ£ **Giáº£m sá»‘ lÆ°á»£ng truy váº¥n SQL**, dÃ¹ng Index & Cache.  
4ï¸âƒ£ **TrÃ¡nh dÃ¹ng vÃ²ng láº·p lá»“ng nhau (nested loops)**.  
5ï¸âƒ£ **Sá»­ dá»¥ng cÃ¡c thÆ° viá»‡n/bundle tá»‘i Æ°u** (vÃ­ dá»¥: Laravel Queues, Redis Cache).  

ğŸ“Œ **VÃ­ dá»¥ báº­t OPCache trong `php.ini`**  
```ini
opcache.enable=1
opcache.memory_consumption=128
```

---

### **8ï¸âƒ£ LÃ m tháº¿ nÃ o Ä‘á»ƒ báº£o máº­t á»©ng dá»¥ng PHP?**  
âœ… **Tráº£ lá»i:**  
âœ” **TrÃ¡nh SQL Injection** báº±ng Prepared Statements  
âœ” **TrÃ¡nh XSS** báº±ng `htmlspecialchars()`  
âœ” **Báº£o vá»‡ CSRF** báº±ng CSRF Token  
âœ” **Sá»­ dá»¥ng HTTPS** thay vÃ¬ HTTP  
âœ” **Háº¡n cháº¿ lá»—i PHP hiá»ƒn thá»‹ trÃªn Production**  

ğŸ“Œ **VÃ­ dá»¥ chá»‘ng SQL Injection**  
```php
$stmt = $pdo->prepare("SELECT * FROM users WHERE email = ?");
$stmt->execute([$email]);
```

ğŸ“Œ **VÃ­ dá»¥ chá»‘ng XSS**  
```php
echo htmlspecialchars($userInput, ENT_QUOTES, 'UTF-8');
```

---

## **V. PHP Advanced**  

### **9ï¸âƒ£ Singleton Pattern lÃ  gÃ¬? Khi nÃ o nÃªn dÃ¹ng?**  
âœ… **Tráº£ lá»i:**  
Singleton Pattern lÃ  má»™t design pattern Ä‘áº£m báº£o ráº±ng **má»™t class chá»‰ cÃ³ má»™t instance duy nháº¥t**.  

ğŸ“Œ **VÃ­ dá»¥ Singleton trong PHP**  
```php
class Singleton {
    private static $instance;
    
    private function __construct() {}
    
    public static function getInstance() {
        if (!self::$instance) {
            self::$instance = new Singleton();
        }
        return self::$instance;
    }
}

$singleton = Singleton::getInstance();
```

ğŸ”¹ **Khi nÃ o dÃ¹ng?**  
âœ” **Káº¿t ná»‘i database**  
âœ” **Logger system**  
âœ” **Caching system**  

---

### **ğŸ”Ÿ PHP há»— trá»£ nhá»¯ng kiá»ƒu dá»¯ liá»‡u nÃ o?**  
âœ… **Tráº£ lá»i:**  
1ï¸âƒ£ Scalar (ÄÆ¡n giáº£n): `int`, `float`, `bool`, `string`  
2ï¸âƒ£ Compound (Há»£p nháº¥t): `array`, `object`, `callable`, `iterable`  
3ï¸âƒ£ Special (Äáº·c biá»‡t): `resource`, `null`  

ğŸ“Œ **VÃ­ dá»¥ kiá»ƒm tra kiá»ƒu dá»¯ liá»‡u**  
```php
var_dump(gettype(123)); // "integer"
var_dump(gettype(3.14)); // "double"
```

---

## **ğŸ¯ Káº¿t luáº­n**  
TrÃªn Ä‘Ã¢y lÃ  **bá»™ cÃ¢u há»i phá»ng váº¥n PHP tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao**, bao gá»“m:  
âœ… **Cáº¥u trÃºc ngÃ´n ngá»¯ PHP**  
âœ… **OOP trong PHP**  
âœ… **PHP & Database (PDO vs MySQLi)**  
âœ… **Performance & Security**  
âœ… **Design Patterns phá»• biáº¿n**  

ChÃºng ta sáº½ Ä‘i **chi tiáº¿t vÃ  chuyÃªn sÃ¢u** vá» **Láº­p trÃ¬nh HÆ°á»›ng Äá»‘i TÆ°á»£ng (OOP) trong PHP**. BÃ i nÃ y sáº½ giÃºp báº¡n hiá»ƒu rÃµ OOP, Ã¡p dá»¥ng vÃ o thá»±c táº¿ vÃ  tráº£ lá»i phá»ng váº¥n má»™t cÃ¡ch chuyÃªn nghiá»‡p.  

---

# **ğŸ”¥ OOP Trong PHP â€“ Tá»« CÆ¡ Báº£n Äáº¿n NÃ¢ng Cao**  

## **1ï¸âƒ£ OOP lÃ  gÃ¬?**  
âœ… **OOP (Object-Oriented Programming â€“ Láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng)** lÃ  má»™t phÆ°Æ¡ng phÃ¡p láº­p trÃ¬nh giÃºp tá»• chá»©c code tá»‘t hÆ¡n báº±ng cÃ¡ch sá»­ dá»¥ng **class** vÃ  **object**.  

ğŸ”¹ **4 tÃ­nh cháº¥t chÃ­nh cá»§a OOP:**  
1ï¸âƒ£ **Encapsulation (ÄÃ³ng gÃ³i)**  
2ï¸âƒ£ **Inheritance (Káº¿ thá»«a)**  
3ï¸âƒ£ **Polymorphism (Äa hÃ¬nh)**  
4ï¸âƒ£ **Abstraction (Trá»«u tÆ°á»£ng hÃ³a)**  

ğŸ“Œ **VÃ­ dá»¥ Ä‘Æ¡n giáº£n vá» OOP trong PHP**  
```php
class Car {
    public $brand;
    
    public function __construct($brand) {
        $this->brand = $brand;
    }

    public function drive() {
        return "Driving a " . $this->brand;
    }
}

$car = new Car("Toyota");
echo $car->drive();  // "Driving a Toyota"
```
---

## **2ï¸âƒ£ Class vÃ  Object trong PHP**  
ğŸ”¹ **Class** lÃ  má»™t "khuÃ´n máº«u" dÃ¹ng Ä‘á»ƒ táº¡o **Ä‘á»‘i tÆ°á»£ng (object)**.  
ğŸ”¹ **Object** lÃ  má»™t thá»±c thá»ƒ cá»¥ thá»ƒ Ä‘Æ°á»£c táº¡o ra tá»« class.  

ğŸ“Œ **VÃ­ dá»¥ vá» Class & Object trong PHP**  
```php
class Person {
    public $name;
    public $age;

    public function __construct($name, $age) {
        $this->name = $name;
        $this->age = $age;
    }

    public function introduce() {
        return "Hi, I'm $this->name and I'm $this->age years old.";
    }
}

$person1 = new Person("John", 25);
echo $person1->introduce();  
// Output: Hi, I'm John and I'm 25 years old.
```

---

## **3ï¸âƒ£ TÃ­nh ÄÃ³ng GÃ³i (Encapsulation)**  
ğŸ”¹ **Encapsulation** giÃºp áº©n dá»¯ liá»‡u bÃªn trong class vÃ  chá»‰ cho phÃ©p truy cáº­p qua **getter** vÃ  **setter**.  
ğŸ”¹ Trong PHP, **visibility (pháº¡m vi truy cáº­p)** gá»“m:  
âœ” `public` â€“ CÃ³ thá»ƒ truy cáº­p tá»« má»i nÆ¡i  
âœ” `protected` â€“ Chá»‰ truy cáº­p Ä‘Æ°á»£c tá»« class Ä‘Ã³ vÃ  class con  
âœ” `private` â€“ Chá»‰ truy cáº­p trong chÃ­nh class Ä‘Ã³  

ğŸ“Œ **VÃ­ dá»¥ vá» Encapsulation**  
```php
class BankAccount {
    private $balance = 0;

    public function deposit($amount) {
        if ($amount > 0) {
            $this->balance += $amount;
        }
    }

    public function getBalance() {
        return $this->balance;
    }
}

$account = new BankAccount();
$account->deposit(500);
echo $account->getBalance();  // Output: 500
```

---

## **4ï¸âƒ£ TÃ­nh Káº¿ Thá»«a (Inheritance)**  
ğŸ”¹ **Inheritance** giÃºp má»™t class cÃ³ thá»ƒ káº¿ thá»«a tá»« class khÃ¡c, tÃ¡i sá»­ dá»¥ng code vÃ  má»Ÿ rá»™ng tÃ­nh nÄƒng.  
ğŸ”¹ Class con cÃ³ thá»ƒ:  
âœ” **Sá»­ dá»¥ng** táº¥t cáº£ thuá»™c tÃ­nh vÃ  phÆ°Æ¡ng thá»©c cá»§a class cha  
âœ” **Ghi Ä‘Ã¨ (override)** phÆ°Æ¡ng thá»©c cá»§a class cha  

ğŸ“Œ **VÃ­ dá»¥ vá» káº¿ thá»«a trong PHP**  
```php
class Animal {
    protected $name;

    public function __construct($name) {
        $this->name = $name;
    }

    public function makeSound() {
        return "Some sound";
    }
}

class Dog extends Animal {
    public function makeSound() {
        return "Bark!"; // Ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c cá»§a class cha
    }
}

$dog = new Dog("Buddy");
echo $dog->makeSound();  // Output: Bark!
```

---

## **5ï¸âƒ£ TÃ­nh Äa HÃ¬nh (Polymorphism)**  
ğŸ”¹ **Polymorphism** cho phÃ©p má»™t phÆ°Æ¡ng thá»©c cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng khÃ¡c nhau trÃªn cÃ¡c class khÃ¡c nhau.  
ğŸ”¹ Trong PHP, cÃ³ 2 cÃ¡ch thá»ƒ hiá»‡n Ä‘a hÃ¬nh:  
âœ” **Ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c (Method Overriding)** â€“ Class con ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c cá»§a class cha  
âœ” **Interface** â€“ Äá»‹nh nghÄ©a má»™t "giao diá»‡n" chung cho cÃ¡c class  

ğŸ“Œ **VÃ­ dá»¥ vá» Method Overriding**  
```php
class Shape {
    public function area() {
        return "Calculating area...";
    }
}

class Circle extends Shape {
    private $radius;

    public function __construct($radius) {
        $this->radius = $radius;
    }

    public function area() {
        return pi() * pow($this->radius, 2);
    }
}

$circle = new Circle(5);
echo $circle->area();  // Output: 78.54
```

ğŸ“Œ **VÃ­ dá»¥ vá» Interface**  
```php
interface Animal {
    public function makeSound();
}

class Cat implements Animal {
    public function makeSound() {
        return "Meow!";
    }
}

$cat = new Cat();
echo $cat->makeSound();  // Output: Meow!
```

---

## **6ï¸âƒ£ TÃ­nh Trá»«u TÆ°á»£ng (Abstraction)**  
ğŸ”¹ **Abstraction** giÃºp Ä‘á»‹nh nghÄ©a má»™t class mÃ  khÃ´ng cáº§n implement toÃ n bá»™ phÆ°Æ¡ng thá»©c bÃªn trong nÃ³.  
ğŸ”¹ CÃ³ 2 cÃ¡ch thá»±c hiá»‡n abstraction trong PHP:  
âœ” **Abstract Class** â€“ CÃ³ thá»ƒ chá»©a phÆ°Æ¡ng thá»©c cÃ³ hoáº·c khÃ´ng cÃ³ body  
âœ” **Interface** â€“ Chá»‰ chá»©a phÆ°Æ¡ng thá»©c khÃ´ng cÃ³ body  

ğŸ“Œ **VÃ­ dá»¥ vá» Abstract Class**  
```php
abstract class Vehicle {
    protected $speed;

    public function __construct($speed) {
        $this->speed = $speed;
    }

    abstract public function move();
}

class Car extends Vehicle {
    public function move() {
        return "Car is moving at speed $this->speed km/h";
    }
}

$car = new Car(60);
echo $car->move();  
// Output: Car is moving at speed 60 km/h
```

---

## **7ï¸âƒ£ Traits trong PHP**  
ğŸ”¹ **Trait** giÃºp chia sáº» phÆ°Æ¡ng thá»©c giá»¯a cÃ¡c class mÃ  khÃ´ng cáº§n káº¿ thá»«a.  
ğŸ”¹ PHP khÃ´ng há»— trá»£ Ä‘a káº¿ thá»«a, nhÆ°ng Trait giÃºp giáº£i quyáº¿t váº¥n Ä‘á» nÃ y.  

ğŸ“Œ **VÃ­ dá»¥ vá» Trait trong PHP**  
```php
trait Logger {
    public function log($message) {
        echo "[LOG]: $message";
    }
}

class User {
    use Logger;
}

$user = new User();
$user->log("User logged in");  
// Output: [LOG]: User logged in
```

---

## **8ï¸âƒ£ Static Methods vÃ  Constants trong PHP**  
ğŸ”¹ **Static Method**: CÃ³ thá»ƒ gá»i mÃ  khÃ´ng cáº§n táº¡o object  
ğŸ”¹ **Constant**: GiÃ¡ trá»‹ khÃ´ng Ä‘á»•i trong class  

ğŸ“Œ **VÃ­ dá»¥ vá» Static Method vÃ  Constant**  
```php
class Math {
    const PI = 3.14;

    public static function square($number) {
        return $number * $number;
    }
}

echo Math::PI;  // Output: 3.14
echo Math::square(4);  // Output: 16
```

---

## **ğŸ¯ Káº¿t Luáº­n**  
ChÃºng ta Ä‘Ã£ Ä‘i qua **má»i khÃ­a cáº¡nh quan trá»ng cá»§a OOP trong PHP**, bao gá»“m:  
âœ… **Class & Object**  
âœ… **Encapsulation (ÄÃ³ng gÃ³i)**  
âœ… **Inheritance (Káº¿ thá»«a)**  
âœ… **Polymorphism (Äa hÃ¬nh)**  
âœ… **Abstraction (Trá»«u tÆ°á»£ng hÃ³a)**  
âœ… **Trait â€“ CÃ¡ch sá»­ dá»¥ng trong PHP**  
âœ… **Static Method & Constants**  

# ğŸ”’ **Báº£o máº­t á»©ng dá»¥ng PHP â€“ Tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao**  

Báº£o máº­t lÃ  má»™t yáº¿u tá»‘ quan trá»ng khi phÃ¡t triá»ƒn á»©ng dá»¥ng PHP. Náº¿u khÃ´ng báº£o vá»‡ Ä‘Ãºng cÃ¡ch, á»©ng dá»¥ng cÃ³ thá»ƒ dá»… dÃ ng bá»‹ táº¥n cÃ´ng nhÆ° **SQL Injection, XSS, CSRF, LFI, RFI, Brute Force**, v.v.  

Trong bÃ i nÃ y, chÃºng ta sáº½ tÃ¬m hiá»ƒu cÃ¡ch **báº£o máº­t á»©ng dá»¥ng PHP** khá»i cÃ¡c cuá»™c táº¥n cÃ´ng phá»• biáº¿n vÃ  Ã¡p dá»¥ng cÃ¡c biá»‡n phÃ¡p tá»‘t nháº¥t.  

---

## **1ï¸âƒ£ SQL Injection â€“ Nguy hiá»ƒm vÃ  cÃ¡ch phÃ²ng chá»‘ng**  
### ğŸ›‘ **SQL Injection lÃ  gÃ¬?**  
- **SQL Injection** xáº£y ra khi káº» táº¥n cÃ´ng chÃ¨n mÃ£ SQL Ä‘á»™c háº¡i vÃ o truy váº¥n, gÃ¢y rÃ² rá»‰ hoáº·c phÃ¡ há»§y dá»¯ liá»‡u trong database.  

ğŸ“Œ **VÃ­ dá»¥ lá»— há»•ng SQL Injection**  
```php
// âŒ Code nguy hiá»ƒm: Truy váº¥n trá»±c tiáº¿p tá»« user input
$username = $_GET['username'];
$password = $_GET['password'];

$sql = "SELECT * FROM users WHERE username = '$username' AND password = '$password'";
$result = $db->query($sql);
```
Káº» táº¥n cÃ´ng cÃ³ thá»ƒ nháº­p:  
```sql
' OR '1'='1' --
```
ğŸ”¹ **Háº­u quáº£**: Truy váº¥n luÃ´n Ä‘Ãºng, káº» táº¥n cÃ´ng Ä‘Äƒng nháº­p thÃ nh cÃ´ng mÃ  khÃ´ng cáº§n máº­t kháº©u!  

---

### âœ… **CÃ¡ch phÃ²ng chá»‘ng SQL Injection**  
ğŸ”¹ **LuÃ´n sá»­ dá»¥ng Prepared Statements vá»›i PDO**  

ğŸ“Œ **CÃ¡ch Ä‘Ãºng: DÃ¹ng Prepared Statements**  
```php
$stmt = $db->prepare("SELECT * FROM users WHERE username = ? AND password = ?");
$stmt->execute([$username, $password]);
$result = $stmt->fetch();
```

Hoáº·c vá»›i `bindParam()`:
```php
$stmt = $db->prepare("SELECT * FROM users WHERE username = :username AND password = :password");
$stmt->bindParam(':username', $username);
$stmt->bindParam(':password', $password);
$stmt->execute();
```
âœ” **Lá»£i Ã­ch**: Truy váº¥n Ä‘Æ°á»£c tá»± Ä‘á»™ng escape, ngÄƒn cháº·n SQL Injection.  

---

## **2ï¸âƒ£ XSS (Cross-Site Scripting) â€“ CÃ¡ch khai thÃ¡c vÃ  báº£o vá»‡**  
### ğŸ›‘ **XSS lÃ  gÃ¬?**  
- XSS xáº£y ra khi káº» táº¥n cÃ´ng chÃ¨n mÃ£ JavaScript Ä‘á»™c háº¡i vÃ o trang web, Ä‘Ã¡nh cáº¯p cookie hoáº·c thá»±c hiá»‡n hÃ nh Ä‘á»™ng thay máº·t ngÆ°á»i dÃ¹ng.  

ğŸ“Œ **VÃ­ dá»¥ lá»— há»•ng XSS**  
```php
// âŒ Code nguy hiá»ƒm: Xuáº¥t dá»¯ liá»‡u mÃ  khÃ´ng lá»c
echo "<h1>Welcome, " . $_GET['name'] . "</h1>";
```
Káº» táº¥n cÃ´ng cÃ³ thá»ƒ nháº­p vÃ o URL:  
```
https://example.com/?name=<script>alert('Hacked!')</script>
```
â›” **Háº­u quáº£**: NgÆ°á»i dÃ¹ng bá»‹ Ä‘Ã¡nh cáº¯p session, dá»¯ liá»‡u bá»‹ sá»­a Ä‘á»•i.  

---

### âœ… **CÃ¡ch phÃ²ng chá»‘ng XSS**  
ğŸ”¹ **DÃ¹ng `htmlspecialchars()` Ä‘á»ƒ escape dá»¯ liá»‡u**  
```php
echo "<h1>Welcome, " . htmlspecialchars($_GET['name'], ENT_QUOTES, 'UTF-8') . "</h1>";
```
âœ” **Lá»£i Ã­ch**: HTML khÃ´ng thá»ƒ bá»‹ chÃ¨n mÃ£ Ä‘á»™c.  

ğŸ”¹ **Cháº·n XSS báº±ng Content Security Policy (CSP) trong HTTP header**  
```php
header("Content-Security-Policy: default-src 'self'");
```
âœ” **Lá»£i Ã­ch**: NgÄƒn cháº·n viá»‡c táº£i mÃ£ JavaScript tá»« bÃªn ngoÃ i.  

---

## **3ï¸âƒ£ CSRF (Cross-Site Request Forgery) â€“ CÃ¡ch khai thÃ¡c vÃ  báº£o vá»‡**  
### ğŸ›‘ **CSRF lÃ  gÃ¬?**  
- Káº» táº¥n cÃ´ng táº¡o má»™t trang web giáº£ máº¡o, lá»«a ngÆ°á»i dÃ¹ng thá»±c hiá»‡n hÃ nh Ä‘á»™ng trÃ¡i phÃ©p (chuyá»ƒn tiá»n, Ä‘á»•i máº­t kháº©u).  

ğŸ“Œ **VÃ­ dá»¥ lá»— há»•ng CSRF**  
NgÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng nháº­p vÃ o ngÃ¢n hÃ ng, náº¿u há» báº¥m vÃ o link:  
```html
<img src="https://bank.com/transfer.php?amount=1000&to=hacker" />
```
â›” **Háº­u quáº£**: Tiá»n bá»‹ chuyá»ƒn mÃ  ngÆ°á»i dÃ¹ng khÃ´ng hay biáº¿t.  

---

### âœ… **CÃ¡ch phÃ²ng chá»‘ng CSRF**  
ğŸ”¹ **DÃ¹ng CSRF Token trong form**  
ğŸ“Œ **CÃ¡ch Ä‘Ãºng: Táº¡o vÃ  kiá»ƒm tra token**  
```php
// Sinh CSRF Token
session_start();
if (!isset($_SESSION['csrf_token'])) {
    $_SESSION['csrf_token'] = bin2hex(random_bytes(32));
}

// ChÃ¨n CSRF token vÃ o form
echo '<input type="hidden" name="csrf_token" value="'.$_SESSION['csrf_token'].'">';
```
ğŸ”¹ **Kiá»ƒm tra CSRF token khi xá»­ lÃ½ form**  
```php
if ($_POST['csrf_token'] !== $_SESSION['csrf_token']) {
    die("CSRF attack detected!");
}
```
âœ” **Lá»£i Ã­ch**: Cháº·n cÃ¡c yÃªu cáº§u giáº£ máº¡o tá»« bÃªn ngoÃ i.  

---

## **4ï¸âƒ£ Báº£o máº­t máº­t kháº©u trong PHP**  
### ğŸ›‘ **Sai láº§m phá»• biáº¿n**  
ğŸ”¹ **LÆ°u máº­t kháº©u dÆ°á»›i dáº¡ng plain text (ráº¥t nguy hiá»ƒm!)**  
```php
// âŒ Code nguy hiá»ƒm
$password = "123456";
$sql = "INSERT INTO users (username, password) VALUES ('$username', '$password')";
```
â›” **Háº­u quáº£**: Náº¿u hacker láº¥y Ä‘Æ°á»£c database, táº¥t cáº£ máº­t kháº©u sáº½ bá»‹ lá»™.  

---

### âœ… **CÃ¡ch báº£o máº­t máº­t kháº©u Ä‘Ãºng chuáº©n**  
ğŸ”¹ **LuÃ´n mÃ£ hÃ³a máº­t kháº©u báº±ng `password_hash()`**  
```php
$hashedPassword = password_hash("123456", PASSWORD_BCRYPT);
```
ğŸ”¹ **Kiá»ƒm tra máº­t kháº©u báº±ng `password_verify()`**  
```php
if (password_verify($userInputPassword, $storedHashedPassword)) {
    echo "Login successful";
} else {
    echo "Invalid password";
}
```
âœ” **Lá»£i Ã­ch**: Ngay cáº£ khi hacker láº¥y Ä‘Æ°á»£c hash, há» váº«n khÃ´ng thá»ƒ giáº£i mÃ£ máº­t kháº©u.  

---

## **5ï¸âƒ£ Chá»‘ng Brute Force Attack báº±ng Rate Limiting**  
ğŸ”¹ **Brute Force Attack** lÃ  khi hacker thá»­ nhiá»u máº­t kháº©u Ä‘á»ƒ Ä‘Äƒng nháº­p.  

### âœ… **CÃ¡ch ngÄƒn cháº·n**  
âœ” **Giá»›i háº¡n sá»‘ láº§n thá»­ Ä‘Äƒng nháº­p**  
```php
session_start();
if (!isset($_SESSION['login_attempts'])) {
    $_SESSION['login_attempts'] = 0;
}

if ($_SESSION['login_attempts'] >= 5) {
    die("Too many failed attempts. Please try again later.");
}

// Kiá»ƒm tra Ä‘Äƒng nháº­p
if ($isLoginFailed) {
    $_SESSION['login_attempts']++;
}
```
âœ” **Sá»­ dá»¥ng ReCAPTCHA Ä‘á»ƒ ngÄƒn bot**  
```html
<input type="hidden" name="g-recaptcha-response" value="...">
```
âœ” **Cháº·n IP náº¿u Ä‘Äƒng nháº­p sai nhiá»u láº§n báº±ng Fail2Ban hoáº·c Firewall**  

---

## **6ï¸âƒ£ Báº£o máº­t Header HTTP báº±ng `header()`**  
âœ” **Cháº·n iframe clickjacking**  
```php
header("X-Frame-Options: DENY");
```
âœ” **Báº­t HSTS (HTTPS Strict Transport Security)**  
```php
header("Strict-Transport-Security: max-age=31536000; includeSubDomains");
```
âœ” **Táº¯t bÃ¡o lá»—i trÃªn Production**  
```php
ini_set('display_errors', 0);
error_reporting(0);
```

---

## **ğŸ¯ Káº¿t luáº­n**  
ChÃºng ta Ä‘Ã£ há»c cÃ¡ch báº£o máº­t á»©ng dá»¥ng PHP khá»i cÃ¡c cuá»™c táº¥n cÃ´ng:  
âœ… **SQL Injection** â€“ DÃ¹ng Prepared Statements  
âœ… **XSS** â€“ DÃ¹ng `htmlspecialchars()`  
âœ… **CSRF** â€“ DÃ¹ng CSRF Token  
âœ… **Máº­t kháº©u** â€“ MÃ£ hÃ³a báº±ng `password_hash()`  
âœ… **Brute Force** â€“ Háº¡n cháº¿ sá»‘ láº§n Ä‘Äƒng nháº­p sai  
âœ… **Header Security** â€“ Cáº¥u hÃ¬nh Ä‘Ãºng cÃ¡ch  

DÆ°á»›i Ä‘Ã¢y lÃ  tá»•ng há»£p nhá»¯ng **nÃ¢ng cáº¥p quan trá»ng tá»« PHP 5.6 â†’ 7.x â†’ 8.x**, giÃºp báº¡n hiá»ƒu rÃµ cÃ¡c thay Ä‘á»•i khi nÃ¢ng cáº¥p.

---

# **1. PHP 5.6 â†’ PHP 7.x**
PHP 7.0 lÃ  báº£n nÃ¢ng cáº¥p lá»›n, táº­p trung vÃ o **hiá»‡u suáº¥t, kiá»ƒu dá»¯ liá»‡u máº¡nh máº½ hÆ¡n vÃ  cÃº phÃ¡p hiá»‡n Ä‘áº¡i**.

## **ğŸ”¹ Cáº£i tiáº¿n chÃ­nh trong PHP 7**
### **1.1. TÄƒng hiá»‡u suáº¥t (Hiá»‡u nÄƒng gáº¥p 2)**
- PHP 7 sá»­ dá»¥ng **Zend Engine 3.0**, nhanh hÆ¡n gáº§n **2 láº§n** so vá»›i PHP 5.6.
- Giáº£m tiÃªu thá»¥ bá»™ nhá»› vÃ  tá»‘i Æ°u hiá»‡u suáº¥t.

### **1.2. Kiá»ƒu dá»¯ liá»‡u máº¡nh hÆ¡n (Scalar Type Hints)**
PHP 5.6 chá»‰ há»— trá»£ `class` vÃ  `array`, cÃ²n PHP 7 há»— trá»£ **kiá»ƒu dá»¯ liá»‡u tÆ°á»ng minh**:
```php
function sum(int $a, int $b): int {
    return $a + $b;
}

echo sum(5, 10); // âœ… 15
// echo sum("5", "10"); âŒ Lá»—i náº¿u báº­t strict mode
```
ğŸ‘‰ Náº¿u báº­t **strict mode** (`declare(strict_types=1);`), PHP sáº½ kiá»ƒm tra cháº·t cháº½ kiá»ƒu dá»¯ liá»‡u.

### **1.3. ToÃ¡n tá»­ Null Coalescing (`??`)**
Dá»… dÃ ng kiá»ƒm tra biáº¿n cÃ³ tá»“n táº¡i hay khÃ´ng:
```php
$username = $_GET['user'] ?? 'Guest'; // Náº¿u khÃ´ng cÃ³ $_GET['user'], giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  'Guest'
```

### **1.4. ToÃ¡n tá»­ Spaceship (`<=>`)**
So sÃ¡nh ba chiá»u:
```php
echo 1 <=> 1; // 0 (báº±ng nhau)
echo 1 <=> 2; // -1 (bÃ© hÆ¡n)
echo 2 <=> 1; // 1 (lá»›n hÆ¡n)
```

### **1.5. Anonymous Class (Lá»›p áº¨n Danh)**
CÃ³ thá»ƒ táº¡o class nhanh mÃ  khÃ´ng cáº§n Ä‘áº·t tÃªn:
```php
$object = new class {
    public function hello() {
        return "Hello, World!";
    }
};
echo $object->hello(); // Hello, World!
```

### **1.6. Há»— trá»£ Exception tá»‘t hÆ¡n**
PHP 7 thay tháº¿ cÃ¡c lá»—i **Fatal Error** báº±ng **Exception**, giÃºp debug dá»… dÃ ng hÆ¡n:
```php
try {
    new NotExistClass(); // TrÆ°á»›c Ä‘Ã¢y lá»—i Fatal Error, giá» lÃ  Exception
} catch (Error $e) {
    echo $e->getMessage();
}
```

### **1.7. Há»§y bá» (Deprecated)**
- `mysql_*` (bá»‹ loáº¡i bá», thay báº±ng `mysqli_*` hoáº·c `PDO`).
- `ereg_*` (thay báº±ng `preg_*`).
- `split()` (thay báº±ng `explode()` hoáº·c `preg_split()`).

---

# **2. PHP 7.x â†’ PHP 8.x**
PHP 8 mang láº¡i **cáº£i tiáº¿n hiá»‡u suáº¥t**, **kiá»ƒu dá»¯ liá»‡u má»›i**, vÃ  **cÃº phÃ¡p hiá»‡n Ä‘áº¡i hÆ¡n**.

## **ğŸ”¹ Cáº£i tiáº¿n chÃ­nh trong PHP 8**
### **2.1. Just-In-Time Compilation (JIT)**
- TÄƒng tá»‘c Ä‘á»™ thá»±c thi code Ä‘Ã¡ng ká»ƒ (lÃªn Ä‘áº¿n **3 láº§n** so vá»›i PHP 7).
- Giáº£m táº£i CPU cho cÃ¡c á»©ng dá»¥ng náº·ng.

### **2.2. Union Types**
Há»— trá»£ nhiá»u kiá»ƒu dá»¯ liá»‡u trong má»™t tham sá»‘ hoáº·c giÃ¡ trá»‹ tráº£ vá»:
```php
function getValue(int|string $input): int|string {
    return $input;
}
echo getValue("Hello"); // âœ… Há»£p lá»‡
```

### **2.3. Named Arguments**
Cho phÃ©p truyá»n tham sá»‘ theo tÃªn thay vÃ¬ thá»© tá»±:
```php
function foo(int $a, int $b, int $c) {}
foo(b: 2, c: 3, a: 1); // âœ… KhÃ´ng cáº§n theo thá»© tá»±
```

### **2.4. Constructor Property Promotion**
Viáº¿t ngáº¯n gá»n hÆ¡n khi khai bÃ¡o thuá»™c tÃ­nh trong class:
```php
class User {
    public function __construct(
        public string $name,
        public int $age
    ) {}
}
$user = new User("John", 30);
```

### **2.5. Match Expression (Thay tháº¿ `switch`)**
Gá»n gÃ ng hÆ¡n `switch` vÃ  khÃ´ng cáº§n `break`:
```php
$status = 200;
$message = match ($status) {
    200 => 'OK',
    404 => 'Not Found',
    default => 'Unknown'
};
```

### **2.6. Nullsafe Operator (`?->`)**
TrÃ¡nh lá»—i `null` khi truy cáº­p object:
```php
$object = null;
echo $object?->method(); // KhÃ´ng lá»—i, tráº£ vá» null
```

### **2.7. Attributes (Annotations)**
Thay vÃ¬ sá»­ dá»¥ng docblock (`/** @Annotation */`), PHP 8 há»— trá»£ **Attribute chÃ­nh thá»©c**:
```php
#[MyAttribute]
class User {}
```

### **2.8. Fibers (PHP 8.1)**
Há»— trá»£ láº­p trÃ¬nh báº¥t Ä‘á»“ng bá»™ nhÆ° JavaScript `async/await`:
```php
$fiber = new Fiber(function() {
    echo "Hello from Fiber!";
});
$fiber->start();
```

### **2.9. Deprecation & Thay Ä‘á»•i**
- `get_magic_quotes_gpc()` bá»‹ xÃ³a hoÃ n toÃ n.
- `create_function()` bá»‹ loáº¡i bá».
- `each()` bá»‹ loáº¡i bá» (dÃ¹ng `foreach()` thay tháº¿).
- `is_resource()` cáº­p nháº­t: Má»™t sá»‘ tÃ i nguyÃªn (`GdImage`) giá» lÃ  object.

---

# **3. NÃªn nÃ¢ng cáº¥p nhÆ° tháº¿ nÃ o?**
âœ… Náº¿u Ä‘ang dÃ¹ng PHP 5.6 â†’ **NÃ¢ng cáº¥p ngay lÃªn PHP 8** (vÃ¬ PHP 7 khÃ´ng cÃ²n Ä‘Æ°á»£c há»— trá»£).  
âœ… Náº¿u Ä‘ang dÃ¹ng PHP 7 â†’ **NÃ¢ng cáº¥p lÃªn PHP 8** Ä‘á»ƒ táº­n dá»¥ng JIT vÃ  hiá»‡u suáº¥t cao hÆ¡n.  

### **ğŸ¯ CÃ¡c bÆ°á»›c nÃ¢ng cáº¥p an toÃ n**
1. **Kiá»ƒm tra phiÃªn báº£n hiá»‡n táº¡i**:
   ```sh
   php -v
   ```
2. **Cáº­p nháº­t mÃ£ nguá»“n**:
   - Thay `mysql_*` báº±ng `PDO` hoáº·c `mysqli_*`.
   - Thay `ereg_*` báº±ng `preg_*`.
   - Kiá»ƒm tra cÃ¡c hÃ m deprecated.
3. **Cháº¡y kiá»ƒm tra tÆ°Æ¡ng thÃ­ch**:
   ```sh
   php -m # Xem cÃ¡c extension cÃ³ tÆ°Æ¡ng thÃ­ch khÃ´ng
   ```
4. **Kiá»ƒm thá»­ á»©ng dá»¥ng** (Unit Test, Integration Test) trÆ°á»›c khi Ä‘Æ°a vÃ o sáº£n pháº©m.

---

# **ğŸ¯ Káº¿t luáº­n**
ğŸ”¹ PHP 7 tÄƒng **hiá»‡u suáº¥t gáº¥p Ä‘Ã´i** so vá»›i PHP 5.6.  
ğŸ”¹ PHP 8 cáº£i tiáº¿n thÃªm **JIT, kiá»ƒu dá»¯ liá»‡u máº¡nh hÆ¡n, nullsafe, match expression...**  
ğŸ”¹ NÃªn **nÃ¢ng cáº¥p trá»±c tiáº¿p lÃªn PHP 8** Ä‘á»ƒ cÃ³ hiá»‡u suáº¥t tá»‘t nháº¥t.  
## **ğŸ¯ Lá»£i Ã­ch thá»±c táº¿ cá»§a PHP 8 Attributes**
PHP 8 Attributes giÃºp code **dá»… Ä‘á»c, dá»… báº£o trÃ¬, vÃ  máº¡nh máº½ hÆ¡n**, Ä‘áº·c biá»‡t há»¯u Ã­ch trong **Routing, Middleware, Validation, Dependency Injection, ORM (Object-Relational Mapping)**.

DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ **tÃ¬nh huá»‘ng thá»±c táº¿** mÃ  Attributes giÃºp cáº£i thiá»‡n code.

---

## **1. á»¨ng dá»¥ng trong Routing (XÃ¢y dá»±ng Router giá»‘ng Laravel)**
### **ğŸš€ TrÆ°á»›c Ä‘Ã¢y (PHP 7 - Annotation)**
Vá»›i PHP 7, khÃ´ng cÃ³ Attributes, pháº£i dÃ¹ng comment `@Route`:
```php
/**
 * @Route("/users")
 */
class UserController {
    /**
     * @Route("/profile", method="GET")
     */
    public function profile() {
        return "User Profile";
    }
}
```
ğŸ“Œ **NhÆ°á»£c Ä‘iá»ƒm**:
- PHP **khÃ´ng hiá»ƒu `@Route`**, pháº£i dÃ¹ng **thÆ° viá»‡n ngoÃ i** nhÆ° Doctrine Ä‘á»ƒ xá»­ lÃ½.
- Code dÃ i dÃ²ng, khÃ³ báº£o trÃ¬.

---

### **ğŸš€ PHP 8 - DÃ¹ng Attributes**
Chá»‰ cáº§n sá»­ dá»¥ng `#[Route]`:
```php
#[Attribute]
class Route {
    public function __construct(
        public string $path,
        public string $method = 'GET'
    ) {}
}

#[Route('/users')]
class UserController {
    #[Route('/profile', 'GET')]
    public function profile() {
        return "User Profile";
    }
}
```
ğŸ”¥ **CÃ¡ch láº¥y route báº±ng Reflection**:
```php
$reflectionClass = new ReflectionClass(UserController::class);
$classAttributes = $reflectionClass->getAttributes();

foreach ($classAttributes as $attribute) {
    $route = $attribute->newInstance();
    echo "Class Route: " . $route->path . PHP_EOL;
}

$reflectionMethod = new ReflectionMethod(UserController::class, 'profile');
$methodAttributes = $reflectionMethod->getAttributes();

foreach ($methodAttributes as $attribute) {
    $route = $attribute->newInstance();
    echo "Method Route: " . $route->path . " (Method: " . $route->method . ")" . PHP_EOL;
}
```
ğŸ“Œ **Káº¿t quáº£**:
```
Class Route: /users
Method Route: /profile (Method: GET)
```
âœ… **Lá»£i Ã­ch**:  
- KhÃ´ng cáº§n thÆ° viá»‡n ngoÃ i, PHP **xá»­ lÃ½ trá»±c tiáº¿p**.  
- **Code sáº¡ch hÆ¡n, dá»… báº£o trÃ¬**, khÃ´ng pháº£i dÃ¹ng comment.  
- **TÃ­ch há»£p dá»… dÃ ng vá»›i há»‡ thá»‘ng Router**.

---

## **2. á»¨ng dá»¥ng trong Middleware (Giá»‘ng Laravel)**
Middleware giÃºp **xá»­ lÃ½ báº£o máº­t, logging, authentication** trÆ°á»›c khi cháº¡y function.

### **ğŸš€ DÃ¹ng Attributes Ä‘á»ƒ gÃ¡n Middleware**
```php
#[Attribute]
class Middleware {
    public function __construct(public string $name) {}
}

class UserController {
    #[Middleware("auth")]
    #[Middleware("log")]
    public function dashboard() {
        return "User Dashboard";
    }
}
```

### **ğŸš€ Láº¥y Middleware báº±ng Reflection**
```php
$method = new ReflectionMethod(UserController::class, 'dashboard');
$middlewares = $method->getAttributes(Middleware::class);

foreach ($middlewares as $middleware) {
    echo "Middleware: " . $middleware->newInstance()->name . PHP_EOL;
}
```
ğŸ“Œ **Káº¿t quáº£**:
```
Middleware: auth
Middleware: log
```
âœ… **Lá»£i Ã­ch**:  
- **Dá»… dÃ ng kiá»ƒm tra middleware** trÆ°á»›c khi gá»i function.  
- **KhÃ´ng cáº§n viáº¿t code thá»§ cÃ´ng**, chá»‰ cáº§n gáº¯n `#[Middleware]`.  
- **TÃ­ch há»£p dá»… dÃ ng vá»›i há»‡ thá»‘ng Middleware hiá»‡n cÃ³**.

---

## **3. á»¨ng dá»¥ng trong Validation Form**
Validation giÃºp kiá»ƒm tra dá»¯ liá»‡u Ä‘áº§u vÃ o, vÃ­ dá»¥: **email, sá»‘ Ä‘iá»‡n thoáº¡i, Ä‘á»™ dÃ i máº­t kháº©u**.

### **ğŸš€ DÃ¹ng Attributes Ä‘á»ƒ Ä‘á»‹nh nghÄ©a Validation**
```php
#[Attribute]
class Validate {
    public function __construct(public string $rule) {}
}

class UserController {
    public function register(
        #[Validate("email")] string $email,
        #[Validate("min:6")] string $password
    ) {}
}
```

### **ğŸš€ DÃ¹ng Reflection Ä‘á»ƒ láº¥y Validation Rule**
```php
$method = new ReflectionMethod(UserController::class, 'register');
foreach ($method->getParameters() as $param) {
    $attributes = $param->getAttributes(Validate::class);
    foreach ($attributes as $attribute) {
        echo "Validation rule for {$param->getName()}: " . $attribute->newInstance()->rule . PHP_EOL;
    }
}
```
ğŸ“Œ **Káº¿t quáº£**:
```
Validation rule for email: email
Validation rule for password: min:6
```
âœ… **Lá»£i Ã­ch**:  
- **Tá»± Ä‘á»™ng kiá»ƒm tra dá»¯ liá»‡u Ä‘áº§u vÃ o** mÃ  khÃ´ng cáº§n viáº¿t nhiá»u `if()`.  
- **CÃ³ thá»ƒ dá»… dÃ ng má»Ÿ rá»™ng há»‡ thá»‘ng validation**.  
- **Dá»… Ä‘á»c, dá»… báº£o trÃ¬**.

---

## **4. á»¨ng dá»¥ng trong Dependency Injection (Giá»‘ng Symfony)**
Dependency Injection (DI) giÃºp **tá»± Ä‘á»™ng inject class** khi gá»i function.

### **ğŸš€ DÃ¹ng Attributes Ä‘á»ƒ Inject Service**
```php
#[Attribute]
class Inject {}

class Logger {
    public function log($message) {
        echo "Logging: $message" . PHP_EOL;
    }
}

class UserController {
    private $logger;

    public function __construct(#[Inject] Logger $logger) {
        $this->logger = $logger;
    }

    public function action() {
        $this->logger->log("User accessed action!");
    }
}
```
### **ğŸš€ DÃ¹ng Reflection Ä‘á»ƒ Inject Service**
```php
$constructor = new ReflectionMethod(UserController::class, '__construct');
$params = $constructor->getParameters();

$dependencies = [];
foreach ($params as $param) {
    if ($param->getAttributes(Inject::class)) {
        $dependencies[] = new $param->getType()->getName();
    }
}

$controller = new UserController(...$dependencies);
$controller->action();
```
ğŸ“Œ **Káº¿t quáº£**:
```
Logging: User accessed action!
```
âœ… **Lá»£i Ã­ch**:  
- **Tá»± Ä‘á»™ng inject class**, khÃ´ng cáº§n truyá»n thá»§ cÃ´ng.  
- **Viáº¿t code Ä‘Æ¡n giáº£n, sáº¡ch hÆ¡n**.  
- **TÃ­ch há»£p dá»… dÃ ng vá»›i há»‡ thá»‘ng DI**.

---

## **ğŸ¯ Tá»•ng Káº¿t â€“ Táº¡i sao nÃªn dÃ¹ng Attributes?**
| **TÃ­nh nÄƒng** | **PHP 7 (Annotation)** | **PHP 8 (Attributes)** |
|--------------|----------------------|----------------------|
| **Äá»‹nh nghÄ©a metadata** | DÃ¹ng comment `/** @annotation */` | DÃ¹ng `#[Attribute]` |
| **TÃ­ch há»£p PHP** | âŒ KhÃ´ng chÃ­nh thá»©c, pháº£i dÃ¹ng thÆ° viá»‡n ngoÃ i | âœ… ChÃ­nh thá»©c há»— trá»£ |
| **Dá»… Ä‘á»c & báº£o trÃ¬** | âŒ KhÃ³ Ä‘á»c, dá»… sai cÃº phÃ¡p | âœ… Gá»n gÃ ng, dá»… báº£o trÃ¬ |
| **TÆ°Æ¡ng thÃ­ch vá»›i Reflection** | âŒ KhÃ´ng há»— trá»£ | âœ… Dá»… dÃ ng láº¥y dá»¯ liá»‡u |

---

## **ğŸ¯ Khi nÃ o nÃªn dÃ¹ng Attributes?**
âœ… Náº¿u báº¡n Ä‘ang xÃ¢y dá»±ng **Router, Middleware, Validation, DI, ORM**.  
âœ… Náº¿u báº¡n muá»‘n **giáº£m code láº·p láº¡i**, tÄƒng **hiá»‡u suáº¥t** vÃ  **báº£o trÃ¬ dá»… dÃ ng hÆ¡n**.  
âœ… Náº¿u báº¡n muá»‘n **trÃ¡nh sá»­ dá»¥ng thÆ° viá»‡n ngoÃ i** (Doctrine, Annotations).  

